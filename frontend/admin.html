<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administra칞칚o - StokLink</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <aside class="sidebar">
        <div class="sidebar-header">
            <h1>StokLink</h1>
            <p id="user-name" style="font-size: 14px; opacity: 0.8; margin-top: 5px;"></p>
        </div>
        <nav class="sidebar-nav">
            <button id="btn-show-dashboard"><i data-lucide="layout-dashboard"></i> Dashboard</button>
            <button id="btn-show-filiais" class="active"><i data-lucide="building-2"></i> Filiais</button>
            <button id="btn-show-usuarios"><i data-lucide="users"></i> Usu치rios</button>
            <button id="btn-show-tags"><i data-lucide="tags"></i> Tags</button>
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.2);">
                <small style="opacity: 0.6; padding-left: 15px;">RECEBIMENTO</small>
            </div>
            <button id="btn-show-fornecedores"><i data-lucide="factory"></i> Fornecedores</button>
            <button id="btn-show-transportadoras"><i data-lucide="truck"></i> Transportadoras</button>
        </nav>
        <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
            <button id="btn-voltar-sistema" style="display: flex; align-items: center; gap: 12px; width: 100%; padding: 15px; background-color: transparent; border: none; color: rgba(255,255,255,0.8); text-align: left; font-size: 16px; cursor: pointer; border-radius: 8px; transition: all 0.3s;">
                <i data-lucide="arrow-left"></i> Voltar ao Sistema
            </button>
            <button id="btn-logout" style="display: flex; align-items: center; gap: 12px; width: 100%; padding: 15px; background-color: transparent; border: none; color: rgba(255,255,255,0.8); text-align: left; font-size: 16px; cursor: pointer; border-radius: 8px; transition: all 0.3s;">
                <i data-lucide="log-out"></i> Sair
            </button>
        </div>
    </aside>

    <main class="main-content">
        <!-- VISTA DE FILIAIS -->
        <div id="filiais-view">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h2>Gerenciar Filiais</h2>
                    <p class="subtitle">Cadastre e gerencie as filiais da sua empresa</p>
                </div>
                <button class="btn btn-primary" id="btn-nova-filial">
                    <i data-lucide="plus"></i> Nova Filial
                </button>
            </div>

            <div class="card">
                <div id="filiais-list"></div>
            </div>
        </div>

        <!-- VISTA DE USU츼RIOS -->
        <div id="usuarios-view" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h2>Gerenciar Usu치rios</h2>
                    <p class="subtitle">Cadastre usu치rios nas filiais da sua empresa</p>
                </div>
                <button class="btn btn-primary" id="btn-novo-usuario">
                    <i data-lucide="user-plus"></i> Novo Usu치rio
                </button>
            </div>

            <div class="card" style="margin-bottom: 20px;">
                <div style="display: flex; gap: 15px; align-items: center;">
                    <label style="font-weight: 500;">Filtrar por Filial:</label>
                    <select id="filtro-filial" style="padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; flex: 1; max-width: 300px;">
                        <option value="">Todas as filiais</option>
                    </select>
                </div>
            </div>

            <div class="card">
                <div id="usuarios-list"></div>
            </div>
        </div>

        <!-- VISTA DE TAGS -->
        <div id="tags-view" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h2>Gerenciar Tags</h2>
                    <p class="subtitle">Crie e gerencie as tags usadas nas transfer칡ncias</p>
                </div>
                <button class="btn btn-primary" id="btn-nova-tag">
                    <i data-lucide="plus"></i> Nova Tag
                </button>
            </div>

            <div class="card">
                <div id="tags-list"></div>
            </div>
        </div>

        <!-- VISTA DE FORNECEDORES -->
        <div id="fornecedores-view" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h2><i data-lucide="factory" style="width: 28px; height: 28px; margin-right: 10px;"></i>Gerenciar Fornecedores</h2>
                    <p class="subtitle">Cadastre os fornecedores para o m칩dulo de Recebimento de F치brica</p>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" id="btn-importar-fornecedores">
                        <i data-lucide="upload"></i> Importar Excel
                    </button>
                    <button class="btn btn-primary" id="btn-novo-fornecedor">
                        <i data-lucide="plus"></i> Novo Fornecedor
                    </button>
                </div>
            </div>

            <div class="card">
                <div id="fornecedores-list"></div>
            </div>
        </div>

        <!-- VISTA DE TRANSPORTADORAS -->
        <div id="transportadoras-view" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div>
                    <h2><i data-lucide="truck" style="width: 28px; height: 28px; margin-right: 10px;"></i>Gerenciar Transportadoras</h2>
                    <p class="subtitle">Cadastre as transportadoras para o m칩dulo de Recebimento de F치brica</p>
                </div>
                <button class="btn btn-primary" id="btn-nova-transportadora">
                    <i data-lucide="plus"></i> Nova Transportadora
                </button>
            </div>

            <div class="card">
                <div id="transportadoras-list"></div>
            </div>
        </div>
    </main>

    <!-- Modal para Filial -->
    <div id="modal-filial" class="modal-overlay">
        <div class="modal-container" style="max-width: 600px;">
            <div class="modal-header">
                <div class="modal-icon success">
                    <i data-lucide="building-2"></i>
                </div>
                <h3 id="modal-filial-title">Nova Filial</h3>
            </div>
            <div class="modal-body">
                <form id="form-filial">
                    <div class="form-group">
                        <label>Nome da Filial *</label>
                        <input type="text" id="filial-nome" required placeholder="Ex: Filial S칚o Paulo">
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>C칩digo</label>
                            <input type="text" id="filial-codigo" placeholder="Ex: SP01">
                        </div>
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="text" id="filial-telefone" placeholder="(11) 99999-9999">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Endere칞o</label>
                        <input type="text" id="filial-endereco" placeholder="Rua, N칰mero">
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Cidade</label>
                            <input type="text" id="filial-cidade" placeholder="S칚o Paulo">
                        </div>
                        <div class="form-group">
                            <label>Estado (UF)</label>
                            <input type="text" id="filial-estado" maxlength="2" placeholder="SP">
                        </div>
                    </div>
                    <div class="form-group" id="filial-ativo-container" style="display: none;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="filial-ativo" checked>
                            Filial Ativa
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-filial-cancelar">Cancelar</button>
                <button class="btn btn-primary" id="modal-filial-salvar">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Usu치rio -->
    <div id="modal-usuario" class="modal-overlay">
        <div class="modal-container" style="max-width: 600px;">
            <div class="modal-header">
                <div class="modal-icon success">
                    <i data-lucide="user"></i>
                </div>
                <h3 id="modal-usuario-title">Novo Usu치rio</h3>
            </div>
            <div class="modal-body">
                <form id="form-usuario">
                    <div class="form-group">
                        <label>Nome Completo *</label>
                        <input type="text" id="usuario-nome" required placeholder="Nome do usu치rio">
                    </div>
                    <div class="form-group">
                        <label>E-mail *</label>
                        <input type="email" id="usuario-email" required placeholder="usuario@exemplo.com">
                    </div>
                    <div class="form-group">
                        <label>Senha *</label>
                        <input type="password" id="usuario-senha" required placeholder="M칤nimo 6 caracteres" minlength="6">
                        <small id="senha-hint">* Deixe em branco para manter a senha atual</small>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Filial *</label>
                            <select id="usuario-filial" required>
                                <option value="">Selecione uma filial</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>N칤vel de Acesso *</label>
                            <select id="usuario-role" required>
                                <option value="operador">Operador</option>
                                <option value="gerente">Gerente</option>
                                <option value="admin">Administrador</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group" id="usuario-ativo-container" style="display: none;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="usuario-ativo" checked>
                            Usu치rio Ativo
                        </label>
                    </div>
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e0e0e0;">
                        <label style="font-weight: 600; margin-bottom: 10px; display: block; color: #333;">Permiss칫es de M칩dulos</label>
                        <div style="display: flex; align-items: center; gap: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                            <input type="checkbox" id="usuario-acesso-recebimento" style="width: 18px; height: 18px; cursor: pointer;">
                            <label for="usuario-acesso-recebimento" style="cursor: pointer; margin: 0; font-weight: normal;">游닍 Acesso ao Recebimento de F치brica</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-usuario-cancelar">Cancelar</button>
                <button class="btn btn-primary" id="modal-usuario-salvar">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Tag -->
    <div id="modal-tag" class="modal-overlay">
        <div class="modal-container" style="max-width: 500px;">
            <div class="modal-header">
                <div class="modal-icon success">
                    <i data-lucide="tag"></i>
                </div>
                <h3 id="modal-tag-title">Nova Tag</h3>
            </div>
            <div class="modal-body">
                <form id="form-tag">
                    <div class="form-group">
                        <label>Nome da Tag *</label>
                        <input type="text" id="tag-nome" required placeholder="Ex: Urgente, Fr치gil, Cliente VIP">
                    </div>
                    <div class="form-group">
                        <label>Cor da Tag</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="color" id="tag-cor" value="#1e3c72" style="width: 60px; height: 40px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer;">
                            <input type="text" id="tag-cor-text" value="#1e3c72" maxlength="7" pattern="^#[0-9A-Fa-f]{6}$" style="flex: 1; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-tag-cancelar">Cancelar</button>
                <button class="btn btn-primary" id="modal-tag-salvar">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Fornecedor -->
    <div id="modal-fornecedor" class="modal-overlay">
        <div class="modal-container" style="max-width: 600px;">
            <div class="modal-header">
                <div class="modal-icon success">
                    <i data-lucide="factory"></i>
                </div>
                <h3 id="modal-fornecedor-title">Novo Fornecedor</h3>
            </div>
            <div class="modal-body">
                <form id="form-fornecedor">
                    <div class="form-group">
                        <label>Nome do Fornecedor *</label>
                        <input type="text" id="fornecedor-nome" required placeholder="Ex: Distribuidora ABC">
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>CNPJ</label>
                            <input type="text" id="fornecedor-cnpj" placeholder="00.000.000/0001-00">
                        </div>
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="text" id="fornecedor-telefone" placeholder="(11) 99999-9999">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" id="fornecedor-email" placeholder="contato@fornecedor.com">
                    </div>
                    <div class="form-group">
                        <label>Endere칞o</label>
                        <input type="text" id="fornecedor-endereco" placeholder="Rua, N칰mero, Cidade - UF">
                    </div>
                    <div class="form-group" id="fornecedor-ativo-container" style="display: none;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="fornecedor-ativo" checked>
                            Fornecedor Ativo
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-fornecedor-cancelar">Cancelar</button>
                <button class="btn btn-primary" id="modal-fornecedor-salvar">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Transportadora -->
    <div id="modal-transportadora" class="modal-overlay">
        <div class="modal-container" style="max-width: 600px;">
            <div class="modal-header">
                <div class="modal-icon success">
                    <i data-lucide="truck"></i>
                </div>
                <h3 id="modal-transportadora-title">Nova Transportadora</h3>
            </div>
            <div class="modal-body">
                <form id="form-transportadora">
                    <div class="form-group">
                        <label>Nome da Transportadora *</label>
                        <input type="text" id="transportadora-nome" required placeholder="Ex: Transportes XYZ">
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>CNPJ</label>
                            <input type="text" id="transportadora-cnpj" placeholder="00.000.000/0001-00">
                        </div>
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="text" id="transportadora-telefone" placeholder="(11) 99999-9999">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" id="transportadora-email" placeholder="contato@transportadora.com">
                    </div>
                    <div class="form-group" id="transportadora-ativo-container" style="display: none;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="transportadora-ativo" checked>
                            Transportadora Ativa
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-transportadora-cancelar">Cancelar</button>
                <button class="btn btn-primary" id="modal-transportadora-salvar">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Importa칞칚o de Fornecedores -->
    <div id="modal-importar-fornecedores" class="modal-overlay">
        <div class="modal-container" style="max-width: 600px;">
            <div class="modal-header">
                <div class="modal-icon success">
                    <i data-lucide="upload"></i>
                </div>
                <h3>Importar Fornecedores do Excel</h3>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px;">Selecione um arquivo Excel (.xlsx ou .xls) com as colunas:</p>
                <ul style="margin-bottom: 20px; padding-left: 20px; color: #666;">
                    <li><strong>COD</strong> - C칩digo do fornecedor (opcional)</li>
                    <li><strong>NOME</strong> - Nome/Raz칚o Social do fornecedor</li>
                    <li><strong>NOMEFANTASIA</strong> - Nome Fantasia (opcional)</li>
                </ul>
                <div class="form-group">
                    <label>Arquivo Excel *</label>
                    <input type="file" id="arquivo-fornecedores" accept=".xlsx,.xls" style="padding: 10px; border: 2px dashed #ccc; border-radius: 8px; width: 100%; cursor: pointer;">
                </div>
                <div id="preview-importacao" style="display: none; margin-top: 15px;">
                    <p style="font-weight: 600; margin-bottom: 10px;">Pr칠-visualiza칞칚o:</p>
                    <div id="preview-tabela" style="max-height: 200px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px;"></div>
                    <p id="preview-total" style="margin-top: 10px; color: #666;"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-importar-cancelar">Cancelar</button>
                <button class="btn btn-primary" id="modal-importar-confirmar" disabled>Importar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma칞칚o -->
    <div id="custom-modal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-icon" id="modal-icon"></div>
                <h3 id="modal-title">T칤tulo</h3>
            </div>
            <div class="modal-body">
                <p id="modal-message">Mensagem</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-btn-cancel" style="display: none;">Cancelar</button>
                <button class="btn btn-primary" id="modal-btn-confirm">OK</button>
            </div>
        </div>
    </div>

    <!-- Biblioteca para ler arquivos Excel -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    
    <script src="admin.js"></script>
</body>
</html>
